# LINEの通知が届かないバグの対処法

LSPatch環境でLIMEs適用時に通知が届かない場合の対処法です。

> [!IMPORTANT]
> 通知が来ないバグはFCM由来のため、LINEをReVancedでGmsCore対応をさせることで根本的に解決しました。 <br>
> 以下のドキュメントはアーカイブとして残しておきます。
> 更新の予定はありません。<br>
> 最新情報は[Discordサーバー](https://github.com/areteruhiro/LIMEs/tree/master?tab=readme-ov-file#%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88)に参加して受け取ってください。 <br>


> [!NOTE]
> LSPatch環境でLINEにパッチを適用した際、  
> 通知が届かなくなる場合があります。 <br>
> そのバグを解決する手順です。

---

## 事前準備

* トーク履歴のバックアップ（Googleドライブ等）
* サブ端末（ログイン維持・QRコード表示用）
* QRコードログインの利用（電話番号ログインは非推奨）

> [!IMPORTANT]
> パッチ適用時にアンインストールが発生するため、  
> 事前にバックアップを行ってください。

---

## 手順1：公式アプリのインストール

環境に合わせて A または B のいずれかの方法でインストールします。  
A を試して難しい場合は B もお試しください。

### A. Playストアを利用する場合
* Google Playストアから公式LINEをインストールします。

### B. SAIを利用する場合
* SAI (Split APKs Installer) を使用し、apkmファイル等をインストールします。

---

## 手順2：通知システムの接続

パッチを当てる前に、公式アプリでGoogleの通知システムと接続します。

1. インストールした公式LINEを起動します。
2. ログイン画面で「Googleアカウントでログイン」を選択します。
3. アカウント選択画面、または続行のポップアップが表示されたら、  
   何も選ばずに戻るかキャンセルします。
4. QRコードログインをしてください。

> [!NOTE]
> この状態で、サブ端末やリマインくん等を使い、
> 通知が届くか確認してください。
> 通知が届かない場合は **手順1のB** を試してください。

> [!NOTE]
> 電話番号ログインは非推奨です。
> 何度も繰り返しログインするとログインが制限され、最悪の場合、垢BANされることがあります。
> どうしても電話番号でログインする場合は、アカウント引き継ぎオプションを有効にしておきましょう。

> [!TIP]
> ログイン処理中の画面のまま、  
> ホームに戻る方法も有効な場合があります。

---

## 手順3：パッチの作成

1. LSPatchでインストール済みLINEのローカルパッチを作成します。
2. **いまはモジュールをスコープしないでください。**
3. 作成したパッチをインストールします  
   （公式版とは署名が異なるためアンインストールが促されます）。

> [!WARNING]
> 通知確認前にLIMEsをスコープすると、
> 通知が来ない可能性が高いです。

---

## 手順4：ログイン

1. パッチ済みLINEを起動します。
2. 手順2と同様に「Googleアカウント画面」を表示させてから戻ります。
3. QRコードログインを選択し、サブ端末を使用してログインします。

---

## 手順5：モジュールの適用

1. サブ端末からメッセージを送信し、通知が届くか確認します。
2. 通知確認後、LSPatchでLIMEsをLSPatch管理画面からスコープします。
3. LINEを再起動します。

> [!IMPORTANT]
> **通知確認 → モジュール適用**  
> の順で行ってください。



> [!NOTE]
> この手順を試しても解決しない場合はDiscordにて教えてください。  
> 他の方法で解決された場合も、ぜひ共有をお願いします。

## クレジット
@areteruhiro <br>
@2ipper <br>
@masahiko_masahiko <br>
<br>
皆様、情報提供ありがとうございます！ <br>
<br>
出典: https://discord.com/channels/1392057820316303362/1453311780502765574 <br>
